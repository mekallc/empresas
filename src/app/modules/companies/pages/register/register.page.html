<ion-header class="ion-no-border">
  <ion-toolbar mode="ios">
    <ion-title>Registro de Empresa</ion-title>
    <ion-buttons slot="end" *ngIf="modal">
      <ion-button (click)="onClose()" *ngIf="(count$ | async)">
        <ion-icon slot="icon-only" name="close" color="light"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div id="content">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-11 col-md-7">
          <div>
            <form [formGroup]="factoryForm" class="meka-form">
              <ion-item>
                <ion-label mode="ios" position="floating">Name <ion-text color="danger">*</ion-text></ion-label>
                <ion-input type="text" formControlName="name"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">E-mail <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required type="email" inputmode="email" formControlName="email"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">Phone <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="phone" type="phone" inputmode="numeric" placeholder="0000-0000"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">Tipo Compañia <ion-text color="danger">*</ion-text></ion-label>
                <ion-select formControlName="type_company" placeholder="Seleccione..." interface="action-sheet">
                  <ion-select-option *ngFor="let item of types$ | async"
                    [value]="item.id">{{ item.name }}</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">Categories <ion-text color="danger">*</ion-text></ion-label>
                <ion-select placeholder="Seleccione..." interface="action-sheet" formControlName="type_expert" multiple="true">
                  <ion-select-option *ngFor="let item of experts$ | async" [value]="item.id">{{ item.name }}</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item lines="none" class="mt-3">
                <ion-label>
                  <h2>Address</h2>
                </ion-label>
              </ion-item>
              <ion-button (click)="onMaps()" expand="block" color="warning">
                <ion-icon slot="start" name="location"></ion-icon>
                Mi Ubicación
              </ion-button>
              <ion-item *ngIf="address">
                <ion-label>
                  <p class="ion-text-center">[{{ roundNumber(address.lat) }}, {{ roundNumber(address.lng) }}]</p>
                  <p class="ion-text-wrap ion-text-center">{{ address.address }}</p>
                </ion-label>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">Country <ion-text color="danger">*</ion-text></ion-label>
                <ion-select placeholder="Seleccione..." interface="action-sheet" formControlName="country" mode="ios">
                  <ion-select-option *ngFor="let item of countries$ | async" [value]="item.id">
                    (+{{ item.phone_code }}) {{ item.name  }}</ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">State <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="state"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">City <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="city"></ion-input>
              </ion-item>
              <ion-item>
                <ion-label mode="ios"position="floating">Zip Code <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="zip_code"></ion-input>
              </ion-item>

              <ion-item>
                <ion-label mode="ios"position="floating">District <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="district"></ion-input>
              </ion-item>

              <ion-item>
                <ion-label mode="ios"position="floating">Street <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="street"></ion-input>
              </ion-item>

              <ion-item>
                <ion-label mode="ios"position="floating">Number <ion-text color="danger">*</ion-text></ion-label>
                <ion-input required formControlName="num"></ion-input>
              </ion-item>

              <ion-item>
                <ion-label mode="ios"position="floating">Complement</ion-label>
                <ion-input formControlName="complement"></ion-input>
              </ion-item>
              <div class="my-4">
                <ion-button expand="block" (click)="onSubmit()" color="light">
                  <ion-icon slot="start" name="checkmark-circle-outline" color="meka"></ion-icon>
                  Save Company
                </ion-button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
